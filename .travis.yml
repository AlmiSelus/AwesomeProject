language: java
jdk: oraclejdk8
addons:
  sonarqube:
    organization: "almiselus-github"
    branches:
      - development

jobs:
  include:
    - stage: Test
      script: mvn test -B
    - stage: Generate tests reports for Sonar
      script:
        - mvn package -Pci -B
        - sonar-scanner
    - stage: Push to master
      script:
        - chmod 777 merge.sh
        - ./merge.sh $GIT_USER $GIT_PASS development master
# add heroku here
#    - stage: Deploy Master to Heroku
#      script: